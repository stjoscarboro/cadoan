var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,c){var d=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var e=d.length,b=a.length;c=Math.max(0,Math.min(c|0,d.length));for(var f=0;f<b&&c<e;)if(d[c++]!=a[f++])return!1;return f>=b}},"es6","es3");
app.factory("AirtableService",["$q","$http","DelayHttp",function(a,b,c){return{getData:function(d,b){var e=a.defer(),f=[],k=function(e,g){var h=a.defer();c({url:e+(g?"&offset="+g:""),method:"GET"}).then(function(a){(a.data.records||[]).forEach(function(a){var c={refId:a.id};b.tables[d].fields.forEach(function(b){switch(!0){case b.startsWith("date"):var d=new Date(Date.parse(a.fields[b]));d.setTime(d.getTime()+6E4*d.getTimezoneOffset());c[b]=d;break;case Array.isArray(a.fields[b]):c[b]=a.fields[b][0];
break;default:c[b]=a.fields[b]?""+a.fields[b]:""}});f.push(c)});a.data.offset?k(e,a.data.offset).then(function(){h.resolve()}):h.resolve()},function(a){h.reject(a.error)});return h.promise};k(b.url+"/"+d+"?api_key="+b.key).then(function(){f.sort(function(a,b){return parseInt(a.id)-parseInt(b.id)});e.resolve(f)},function(a){console.log(a)});return e.promise},createData:function(d,c,g){var f=a.defer();b({url:g.url+"/"+d+"?api_key="+g.key,method:"POST",data:c}).then(function(){f.resolve()},function(a){console.log("Error: "+
a.error)});return f.promise},updateData:function(c,e,g,f){var d=a.defer();b({url:f.url+"/"+c+"/"+e+"?api_key="+f.key,method:"PUT",data:g}).then(function(){d.resolve()},function(a){console.log("Error: "+a.error)});return d.promise},deleteData:function(c,e,g){var d=a.defer();b({url:g.url+"/"+c+"/"+e+"?api_key="+g.key,method:"DELETE"}).then(function(){d.resolve()},function(a){console.log("Error: "+a.error)});return d.promise}}}]);

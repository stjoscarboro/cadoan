var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,d,c){a instanceof String&&(a=String(a));for(var e=a.length,b=0;b<e;b++){var f=a[b];if(d.call(c,f,b,a))return{i:b,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,c){a!=Array.prototype&&a!=Object.prototype&&(a[d]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,d,c,e){if(d){c=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var b=a[e];b in c||(c[b]={});c=c[b]}a=a[a.length-1];e=c[a];d=d(e);d!=e&&null!=d&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");$jscomp.owns=function(a,d){return Object.prototype.hasOwnProperty.call(a,d)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(a,d){for(var c=1;c<arguments.length;c++){var e=arguments[c];if(e)for(var b in e)$jscomp.owns(e,b)&&(a[b]=e[b])}return a};$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");$jscomp.arrayIteratorImpl=function(a){var d=0;return function(){return d<a.length?{done:!1,value:a[d++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(a,d){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:d})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(c||"")+"_"+d++,c)}var d=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,e={next:function(){if(c<a.length){var b=c++;return{value:d(b,a[b]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
app.factory("AirtableChoirService",["$q","$http","AirtableService","AppUtil",function(a,d,c,e){var b={},f={url:"https://api.airtable.com/v0/appct8Cpvuk7NtKiQ",key:Base64.decode("a2V5UUxrUm82andCeTdNWmg="),tables:{singers:{fields:["id","name"]},liturgies:{fields:["id","name","year","date","intention"]},schedules:{fields:["id","date","liturgy","songs"]}}};b.getCategories=function(){return["Nh\u1eadp L\u1ec5","\u0110\u00e1p Ca","D\u00e2ng L\u1ec5","Hi\u1ec7p L\u1ec5","K\u1ebft L\u1ec5"]};b.loadSingers=
function(){var b=a.defer();c.getData("singers",f).then(function(a){b.resolve(a)});return b.promise};b.loadLiturgies=function(){var b=a.defer();c.getData("liturgies",f).then(function(a){b.resolve(a)});return b.promise};b.loadSchedules=function(b){var d=a.defer(),g=[];c.getData("schedules",f).then(function(a){a.forEach(function(a){var c=JSON.parse(a.songs);c.forEach(function(a){var c=b.find(function(b){return b.id===a.id});c&&Object.assign(a,e.pick(c,"title","category","author","audio","url","folder"))});
g.push({id:a.id,refId:a.refId,date:a.date,liturgy:JSON.parse(a.liturgy),songs:c})});g.sort(function(a,b){return a.date-b.date});d.resolve(g)});return d.promise};b.createSchedule=function(a){return c.createData("schedules",{fields:a},f)};b.updateSchedule=function(a,b){return c.updateData("schedules",a,{fields:b},f)};b.deleteSchedule=function(a){return c.deleteData("schedules",a,f)};b.listCategories=function(a){var c=a.reduce(function(a,b){a[b.category]=(a[b.category]||0)+1;return a},{});c=Object.keys(c).reduce(function(a,
b){0<c[b]&&a.push(b);return a},[]);b.sortCategories(c);return c};b.listAuthors=function(a){var c=a.reduce(function(a,b){a[b.author]=(a[b.author]||0)+1;return a},{});c=Object.keys(c).reduce(function(a,b){0<c[b]&&a.push(b);return a},[]);b.sortByLocale(c,"name");return c};b.sortByLocale=function(a,b){a&&a.sort(function(a,c){a="object"===typeof a&&b?a[b]:a;c="object"===typeof c&&b?c[b]:c;return a&&c?a.localeCompare(c):0})};b.sortCategories=function(a){b.sortByLocale(a);a&&a.sort(function(a,c){var d=b.getCategories().reverse();
return d.indexOf(c)-d.indexOf(a)})};return b}]);

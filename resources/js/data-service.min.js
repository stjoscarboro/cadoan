var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(d){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(d||"")+"_"+b++,d)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var d=0,f={next:function(){if(d<a.length){var e=d++;return{value:b(e,a[e]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};
$jscomp.polyfill=function(a,b,d,f){if(b){d=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var e=a[f];e in d||(d[e]={});d=d[e]}a=a[a.length-1];f=d[a];b=b(f);b!=f&&null!=b&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,d){return d})}},"es8","es3");
$jscomp.findInternal=function(a,b,d){a instanceof String&&(a=String(a));for(var f=a.length,e=0;e<f;e++){var k=a[e];if(b.call(d,k,e,a))return{i:e,v:k}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,d){return $jscomp.findInternal(this,a,d).v}},"es6","es3");$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(a,b){for(var d=1;d<arguments.length;d++){var f=arguments[d];if(f)for(var e in f)$jscomp.owns(f,e)&&(a[e]=f[e])}return a};$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
app.factory("DataService",["$q","HttpService","AppUtil",function(a,b,d){var f={liturgies:{years:{id:"1iax4O8R0IiZd9N77bK9XNRDllG40ZUJL7wiGCZocUak",range:"Years!A:C"},1:{id:"1iax4O8R0IiZd9N77bK9XNRDllG40ZUJL7wiGCZocUak",range:"A!A:E"},2:{id:"1iax4O8R0IiZd9N77bK9XNRDllG40ZUJL7wiGCZocUak",range:"B!A:E"},3:{id:"1iax4O8R0IiZd9N77bK9XNRDllG40ZUJL7wiGCZocUak",range:"C!A:E"}},cadoan:{schedules:{id:"1wJc-PNIW73HSGuYus5JBZw9IMr1fZ3J74GXm-e5b-8A",range:"A:C"},singers:{id:"1UUNHdYv2V4JZ492eiQUCaujSMy2zti1aLblefL36yjs",
range:"A:B"}}},e={getCategories:function(){return["Nh\u1eadp L\u1ec5","\u0110\u00e1p Ca","D\u00e2ng L\u1ec5","Hi\u1ec7p L\u1ec5","K\u1ebft L\u1ec5"]},getSheetData:function(a,c){a=k(a);return b.getData("https://sheets.googleapis.com/v4/spreadsheets/"+a.id+"/values/"+a.range,c)},appendSheetData:function(a,c,h){a=k(a);return b.postData("https://sheets.googleapis.com/v4/spreadsheets/"+a.id+"/values/"+a.range+":append",c,h)},updateSheetData:function(a,c,h){a=k(a);return b.postData("https://sheets.googleapis.com/v4/spreadsheets/"+
a.id+":batchUpdate",c,h)},loadYears:function(){var g=a.defer(),c=[];e.getSheetData("liturgies.years").then(function(a){(a=a.data.values)&&a.forEach(function(a){a[1]&&c.push({id:a[0],name:a[1],start:m(a[2])})});g.resolve(c)},function(a){console.log(a.data.error)});return g.promise},loadLiturgies:function(){for(var g=[],c=a.defer(),h=[],l=1;3>=l;l++)h.push(a.resolve(e.getSheetData("liturgies."+l),function(a){(a=a.data.values)&&a.forEach(function(a){a[3]&&g.push({id:a[0],name:a[1],year:a[2],date:m(a[3]),
special:a[4]})})}));a.all(h).then(function(){c.resolve(g)});return c.promise},loadSingers:function(){var g=a.defer(),c=[];e.getSheetData("cadoan.singers").then(function(a){(a=a.data.values)&&a.forEach(function(a){a[1]&&c.push({id:a[0],name:a[1]})});g.resolve(c)},function(a){console.log(a.data.error)});return g.promise},loadSchedules:function(g){var c=a.defer(),h=[];e.getSheetData("cadoan.schedules").then(function(a){(a=a.data.values)&&a.forEach(function(a){var c=m(a[0]),b=JSON.parse(a[1]);a=JSON.parse(a[2]);
a.forEach(function(a){var c=g.find(function(c){return c.id===a.id});c&&Object.assign(a,d.pick(c,"title","category","author","audio","url","folder"))});h.push({date:c,liturgy:b,songs:a})});c.resolve(h)},function(a){console.log(a.data.error)});return c.promise},addSchedule:function(a){return e.appendSheetData("cadoan.schedules",a,{valueInputOption:"USER_ENTERED"})},updateSchedule:function(a){return e.updateSheetData("cadoan.schedules",a)},listCategories:function(a){var c=a.reduce(function(a,c){a[c.category]=
(a[c.category]||0)+1;return a},{});c=Object.keys(c).reduce(function(a,g){0<c[g]&&a.push(g);return a},[]);e.sortCategories(c);return c},listAuthors:function(a){var c={},b;a=$jscomp.makeIterator(a);for(b=a.next();!b.done;b=a.next()){var g=b.value;b=c[g.author]||0;c[g.author]=b+1}return Object.keys(c).reduce(function(a,b){1<c[b]&&a.push(b);return a},[])},sortByLocale:function(a,c){a&&a.sort(function(a,b){a="object"===typeof a&&c?a[c]:a;b="object"===typeof b&&c?b[c]:b;return a&&b?a.localeCompare(b):0})},
sortCategories:function(a){e.sortByLocale(a);a&&a.sort(function(a,b){var c=e.getCategories().reverse();return c.indexOf(b)-c.indexOf(a)})}},k=function(a){a=a.split(".");var b=f;a.forEach(function(a){b=b[a]});return b},m=function(a){a=new Date(Date.parse(a));a.setTime(a.getTime()+6E4*a.getTimezoneOffset());return a};return e}]);

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var e=0;return function(){return e<a.length?{done:!1,value:a[e++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,d){a!=Array.prototype&&a!=Object.prototype&&(a[e]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(a,e){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:e})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(d){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(d||"")+"_"+e++,d)}var e=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,e){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var d=0,f={next:function(){if(d<a.length){var c=d++;return{value:e(c,a[c]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};
$jscomp.polyfill=function(a,e,d,f){if(e){d=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var c=a[f];c in d||(d[c]={});d=d[c]}a=a[a.length-1];f=d[a];e=e(f);e!=f&&null!=e&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:e})}};$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,d){return d})}},"es8","es3");
$jscomp.findInternal=function(a,e,d){a instanceof String&&(a=String(a));for(var f=a.length,c=0;c<f;c++){var k=a[c];if(e.call(d,k,c,a))return{i:c,v:k}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,d){return $jscomp.findInternal(this,a,d).v}},"es6","es3");$jscomp.owns=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(a,e){for(var d=1;d<arguments.length;d++){var f=arguments[d];if(f)for(var c in f)$jscomp.owns(f,c)&&(a[c]=f[c])}return a};$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
app.factory("DataService",["$q","HttpService","AppUtil",function(a,e,d){var f={liturgies:{years:{id:"1iax4O8R0IiZd9N77bK9XNRDllG40ZUJL7wiGCZocUak",range:"Years!A:C"},1:{id:"1iax4O8R0IiZd9N77bK9XNRDllG40ZUJL7wiGCZocUak",range:"A!A:E"},2:{id:"1iax4O8R0IiZd9N77bK9XNRDllG40ZUJL7wiGCZocUak",range:"B!A:E"},3:{id:"1iax4O8R0IiZd9N77bK9XNRDllG40ZUJL7wiGCZocUak",range:"C!A:E"}},cadoan:{schedules:{id:"1wJc-PNIW73HSGuYus5JBZw9IMr1fZ3J74GXm-e5b-8A",range:"A:C"},singers:{id:"1UUNHdYv2V4JZ492eiQUCaujSMy2zti1aLblefL36yjs",
range:"A:B"}}},c={getCategories:function(){return["Nh\u1eadp L\u1ec5","\u0110\u00e1p Ca","D\u00e2ng L\u1ec5","Hi\u1ec7p L\u1ec5","K\u1ebft L\u1ec5"]},getSheetData:function(a,b){a=k(a);return e.getData("https://sheets.googleapis.com/v4/spreadsheets/"+a.id+"/values/"+a.range,b)},appendSheetData:function(a,b,h){a=k(a);return e.postData("https://sheets.googleapis.com/v4/spreadsheets/"+a.id+"/values/"+a.range+":append",b,h)},updateSheetData:function(a,b,h){a=k(a);return e.postData("https://sheets.googleapis.com/v4/spreadsheets/"+
a.id+":batchUpdate",b,h)},loadYears:function(){var g=a.defer(),b=[];c.getSheetData("liturgies.years").then(function(a){(a=a.data.values)&&a.forEach(function(a){a[1]&&b.push({id:a[0],name:a[1],start:m(a[2])})});g.resolve(b)},function(a){console.log(a.data.error)});return g.promise},loadLiturgies:function(){for(var g=[],b=a.defer(),h=[],l=1;3>=l;l++)h.push(a.resolve(c.getSheetData("liturgies."+l),function(a){(a=a.data.values)&&a.forEach(function(a){a[3]&&g.push({id:a[0],name:a[1],year:a[2],date:m(a[3]),
intention:a[4]})})}));a.all(h).then(function(){b.resolve(g)});return b.promise},loadSingers:function(){var g=a.defer(),b=[];c.getSheetData("cadoan.singers").then(function(a){(a=a.data.values)&&a.forEach(function(a){a[1]&&b.push({id:a[0],name:a[1]})});g.resolve(b)},function(a){console.log(a.data.error)});return g.promise},loadSchedules:function(g){var b=a.defer(),h=[];c.getSheetData("cadoan.schedules").then(function(a){(a=a.data.values)&&a.forEach(function(a){var b=m(a[0]),c=JSON.parse(a[1]);a=JSON.parse(a[2]);
a.forEach(function(a){var b=g.find(function(b){return b.id===a.id});b&&Object.assign(a,d.pick(b,"title","category","author","audio","url","folder"))});h.push({date:b,liturgy:c,songs:a})});b.resolve(h)},function(a){console.log(a.data.error)});return b.promise},addSchedule:function(a){return c.appendSheetData("cadoan.schedules",a,{valueInputOption:"USER_ENTERED"})},updateSchedule:function(a){return c.updateSheetData("cadoan.schedules",a)},listCategories:function(a){var b=a.reduce(function(a,b){a[b.category]=
(a[b.category]||0)+1;return a},{});b=Object.keys(b).reduce(function(a,c){0<b[c]&&a.push(c);return a},[]);c.sortCategories(b);return b},listAuthors:function(a){var b=a.reduce(function(a,b){a[b.author]=(a[b.author]||0)+1;return a},{});b=Object.keys(b).reduce(function(a,c){0<b[c]&&a.push(c);return a},[]);c.sortByLocale(b,"name");return b},sortByLocale:function(a,b){a&&a.sort(function(a,c){a="object"===typeof a&&b?a[b]:a;c="object"===typeof c&&b?c[b]:c;return a&&c?a.localeCompare(c):0})},sortCategories:function(a){c.sortByLocale(a);
a&&a.sort(function(a,d){var b=c.getCategories().reverse();return b.indexOf(d)-b.indexOf(a)})}},k=function(a){a=a.split(".");var b=f;a.forEach(function(a){b=b[a]});return b},m=function(a){a=new Date(Date.parse(a));a.setTime(a.getTime()+6E4*a.getTimezoneOffset());return a};return c}]);
